title: Home

resources:
  - url: /community_plugin/lovelace-card-tools/card-tools.js
    type: js
  - url: /community_plugin/weather-card/weather-card.js
    type: module
  - url: /community_plugin/compact-custom-header/compact-custom-header.js
    type: module
  - url: /community_plugin/mini-graph-card/mini-graph-card.js
    type: module
  - url: /community_plugin/lovelace-browser-commander/browser-commander.js
    type: js
  - url: /community_plugin/lovelace-slider-entity-row/slider-entity-row.js
    type: js
  - url: /community_plugin/vertical-stack-in-card/vertical-stack-in-card.js
    type: js
  - url: /community_plugin/button-card/button-card.js
    type: module
  - url: /community_plugin/lovelace-fold-entity-row/fold-entity-row.js
    type: js
  - url: /community_plugin/lovelace-auto-entities/auto-entities.js
    type: js

x-vacuum-buttons: &vacuum-buttons
  color: auto
  entity: vacuum.robovac
  size: 25%

background: center / cover repeat-y url("/local/background/dark-wp.jpg") fixed

excluded_entities: !include /config/lovelace/excluded-entities.yaml

cch:

views:
  - title: Home
    icon: mdi:home
    cards:
      - type: vertical-stack
        cards:
          - type: entities
            title: Familie
            show_header_toggle: false
            entities:
              - !secret person_1
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                name: Temperatur
                points_per_hour: 2
                hours_to_show: 72
                font_size: 65
                entities:
                  - sensor.wemosd1_room_temperature
              - type: custom:mini-graph-card
                name: Luftfeuchtigkeit
                points_per_hour: 2
                hours_to_show: 72
                font_size: 65
                entities:
                  - sensor.wemosd1_room_humidty
          - type: plant-status
            entity: plant.howea_forsteriana
          - type: plant-status
            entity: plant.yucca_elephantipes
          - type: glance
            title: Verkehr
            entities:
              - entity: sensor.google_travel_time_dev1_transit
                name: Arbeitsweg
              - entity: sensor.google_travel_time_dev1_dynamic_home
                name: Heimweg
              # - entity: sensor.uberx_time
              #   name: UberX
              # - entity: sensor.uberx_price
              #   name: UberX
      - type: vertical-stack
        cards:
          - type: picture-glance
            title: Wohnzimmer
            entities:
              - media_player.braviatv_1
              - media_player.playstation_4
              - light.deckenleuchte
              - light.stehlampe
            state_image:
              "on": /local/ui-pics/wohnzimmer.png
              "off": /local/ui-pics/wohnzimmer_bw.png
            entity: group.wohnzimmer
          - type: custom:vertical-stack-in-card
            cards:
              - type: glance
                title: Staubsauger
                entities:
                  - entity: sensor.robovac_status
                    icon: mdi:robot-vacuum
                  - sensor.robovac_battery
                  - sensor.robovac_fanspeed
                  - entity: counter.vacuum_counter
                    name: '#'
              #- type: entities
              #  show_header_toggle: false
              #  entities:
              #    - type: divider
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    <<: *vacuum-buttons
                    icon: mdi:play
                    show_name: false
                    tap_action:
                      action: call-service
                      service: vacuum.turn_on
                      service_data:
                        entity_id: vacuum.robovac
                  - type: custom:button-card
                    <<: *vacuum-buttons
                    icon: mdi:stop
                    show_name: false
                    tap_action:
                      action: call-service
                      service: vacuum.turn_off
                      service_data:
                        entity_id: vacuum.robovac
                  - type: custom:button-card
                    <<: *vacuum-buttons
                    icon: mdi:pause
                    show_name: false
                    tap_action:
                      action: call-service
                      service: vacuum.pause
                      service_data:
                        entity_id: vacuum.robovac
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    <<: *vacuum-buttons
                    icon: mdi:vector-circle
                    show_name: false
                    tap_action:
                      action: call-service
                      service: vacuum.clean_spot
                      service_data:
                        entity_id: vacuum.robovac
                  - type: custom:button-card
                    <<: *vacuum-buttons
                    icon: mdi:bell-ring
                    show_name: false
                    tap_action:
                      action: call-service
                      service: vacuum.locate
                      service_data:
                        entity_id: vacuum.robovac
                  - type: custom:button-card
                    <<: *vacuum-buttons
                    icon: mdi:delete-empty
                    show_name: false
                    tap_action:
                      action: call-service
                      service: counter.reset
                      service_data:
                        entity_id: counter.vacuum_counter
                  #- type: custom:button-card
                  #  <<: *vacuum-buttons
                  #  icon: mdi:delete-empty
                  #  show_name: false
                  #  tap_action:
                  #    action: call-service
                  #    service: vacuum.return_to_base
                  #    service_data:
                  #      entity_id: vacuum.robovac
              - type: entities
                show_header_toggle: false
                entities:
                  #- type: divider
                  - type: custom:fold-entity-row
                    head:
                      type: section
                      label: Automatisierung
                    entities:
                      - automation.robovac_auto_turn_on
                      - automation.robovac_clean_notification
                      - automation.robovac_cleaned
                      - automation.robovac_clean_counter
      - type: vertical-stack
        cards:
          - type: custom:weather-card
            entity: weather.dark_sky
            icons: "/community_plugin/weather-card/icons/"
          - type: entities
            title: Beleuchtung
            show_header_toggle: false
            entities:
              - type: custom:slider-entity-row
                entity: light.deckenleuchte
                toggle: true
                hide_when_off: true
              - type: custom:slider-entity-row
                entity: light.stehlampe
                toggle: true
                hide_when_off: true
              - type: custom:slider-entity-row
                entity: light.deckenspots
                toggle: true
                hide_when_off: true
              - type: custom:slider-entity-row
                entity: light.kuche
                toggle: true
                hide_when_off: true
              - type: custom:slider-entity-row
                entity: light.vorzimmer
                toggle: true
                hide_when_off: true
              - type: custom:slider-entity-row
                entity: light.badezimmer
                toggle: true
                hide_when_off: true
              - type: custom:slider-entity-row
                entity: light.toilette
                toggle: true
                hide_when_off: true

  - title: Wohnzimmer
    icon: mdi:sofa
    cards:
      - type: media-control
        entity: media_player.braviatv_1
      - type: media-control
        entity: media_player.playstation_4
      - type: entities
        title: Deckenleuchte
        show_header_toggle: false
        entities:
          - light.deckenleuchte
      - type: entities
        title: Stehlampe
        entities:
          - light.stehlampe
          - input_boolean.loop_livingcolors_2
      - type: entities
        title: Anderes
        show_header_toggle: false
        entities:
          - input_datetime.time_turnoff_devices

  - title: Schlafzimmer
    icon: mdi:bed-empty
    cards:
      - type: entities
        title: Deckenspots
        show_header_toggle: false
        entities:
          - light.deckenspots
          - light.hue_color_spot_1
          - light.hue_color_spot_2
          - light.hue_color_spot_3
          - script.scene_bright
          - script.scene_nightlight
          - input_boolean.loop_livingcolors_1

      - type: entities
        title: Beleuchtungsszenen
        entities:
          - script.scene_tropical_twilight
          - script.scene_arctic_aurora
          - script.scene_spring_blossom
          - input_select.hue_scenes

      - type: custom:vertical-stack-in-card
        title: Aufwachbeleuchtung
        cards:
          - type: entities
            entities:
              - input_boolean.wakeup
              
          - type: conditional
            conditions:
              - entity: input_boolean.wakeup
                state: 'on'
            card:
              type: entities
              entities:
                - input_datetime.wakeup_alarm_time
                - input_number.wakeup_duration
                - input_boolean.wakeup_weekends

  - icon: mdi:lightbulb
    title: Beleuchtung
    cards:
      - type: entities
        title: Wohnzimmer
        entities:
          - type: custom:slider-entity-row
            toggle: true
            hide_when_off: true
            entity: light.deckenleuchte
          - type: custom:slider-entity-row
            toggle: true
            hide_when_off: true
            entity: light.stehlampe
      - type: entities
        title: Schlafzimmer
        entities:
          - type: custom:slider-entity-row
            toggle: true
            hide_when_off: true
            name: Schlafzimmer-Spot 1
            entity: light.hue_color_spot_1
          - type: custom:slider-entity-row
            toggle: true
            hide_when_off: true
            name: Schlafzimmer-Spot 2
            entity: light.hue_color_spot_2
          - type: custom:slider-entity-row
            toggle: true
            hide_when_off: true
            name: Schlafzimmer-Spot 3
            entity: light.hue_color_spot_3
          - type: custom:slider-entity-row
            toggle: true
            hide_when_off: true
            entity: light.schreibtischlampe
      - type: entities
        title: Küche
        entities:
          - type: custom:slider-entity-row
            toggle: true
            hide_when_off: true
            entity: light.dimmable_light_3
            name: Küchen-LED 1
          - type: custom:slider-entity-row
            toggle: true
            hide_when_off: true
            entity: light.dimmable_light_4
            name: Küchen-LED 2
      - type: entities
        title: andere
        entities:
          - type: custom:slider-entity-row
            toggle: true
            hide_when_off: true
            entity: light.dimmable_light_5
            name: Vorzimmer-LED
          - type: custom:slider-entity-row
            toggle: true
            hide_when_off: true
            entity: light.dimmable_light_2
            name: Badezimmer-LED
          - type: custom:slider-entity-row
            toggle: true
            hide_when_off: true  
            entity: light.dimmable_light_1
            name: Toiletten-LED

      - type: entities
        title: Steuerung
        show_header_toggle: false
        entities:
          - type: custom:fold-entity-row
            head:
              type: section
              label: Automatisierungen
            entities:
              - automation.lights_and_tv_off
              - entity: automation.random_light_deckenspots
                name: Loop-Effekt Deckenspots
              - entity: automation.turn_off_loop_effect_deckenspots
                name: Loop-Effekt Deckenspots auto-aus
              - entity: automation.random_light_stehlampe
                name: Loop-Effekt Stehlampe
              - entity: automation.turn_off_loop_effect_stehlampe
                name: Loop-Effekt Stehlampe auto-aus
              - automation.hue_scene_activation
              - automation.ready_for_bed
              - entity: automation.gaming_ps4
                name: Gaming-Beleuchtung
              - entity: automation.stop_playing_ps4
                name: Gaming-Beleuchtung aus
              - automation.wakeup_light_bedroom
              
          - type: custom:fold-entity-row
            head:
              type: section
              label: Scripts
            entities:
              - script.wakeup_schlafzimmer
              - script.scene_arctic_aurora
              - script.scene_bright
              - script.scene_nightlight
              - script.scene_spring_blossom
              - script.scene_tropical_twilight

  - title: IoT
    icon: mdi:chip
    cards:
      - type: custom:vertical-stack-in-card
        cards:
          - type: entities
            entities:
              - entity: sensor.sonoff_maddox_version
                name: Tasmota Version
          - type: entities
            show_header_toggle: false
            title: Automatisierungen
            entities:
              - entity: automation.get_tasmota_device_info
                name: Tasmota Statusabfrage
      - type: vertical-stack
        cards:
          - type: entities
            show_header_toggle: false
            entities:
              - entity: switch.magic_mirror
                name: Magic Mirror
              - entity: switch.magic_mirror_power
                name: S20 - Magic Mirror
          - type: custom:vertical-stack-in-card
            cards:
              - type: glance
                title: S20 - MM
                entities:
                  - entity: sensor.s20_mm_version
                    name: Version
                    icon: mdi:alpha-v-box
                  - entity: sensor.s20_mm_ip
                    name: IP
                    icon: mdi:map-marker
                  - entity: sensor.s20_mm_uptime
                    name: Betriebszeit
                    icon: mdi:arrow-up-thick
              - type: custom:mini-graph-card
                name: Signalstärke
                icon: mdi:signal-variant
                line_color: orange
                font_size: 65
                entities:
                  - sensor.s20_mm_rssi
              - type: entities
                show_header_toggle: false
                entities:
                  - type: custom:fold-entity-row
                    head:
                      type: section
                      label: Automatisierungen
                    entities:
                      - entity: automation.update_available_tasmota_sonoff_3463
                        name: Updatebenachrichtigung
                      - entity: automation.upgrade_tasmota_sonoff_3463
                        name: Upgrade
                  - type: custom:fold-entity-row
                    head:
                      type: section
                      label: Scripts
                    entities:
                      - entity: script.tasmota_status_sonoff_3463
                        name: Status
                      - entity: script.tasmota_fwstatus_sonoff_3463
                        name: FW-Status
                      - entity: script.tasmota_restart_sonoff_3463
                        name: Neustart
                      - entity: script.tasmota_reset_sonoff_3463
                        name: Reset
                      - entity: script.tasmota_upgrade_sonoff_3463
                        name: Upgrade
      - type: custom:vertical-stack-in-card
        cards:
          - type: glance
            title: wemosd1 - 1
            entities:
              - entity: sensor.wemosd1_version
                name: Version
                icon: mdi:alpha-v-box
              - entity: sensor.wemosd1_ip
                name: IP
                icon: mdi:map-marker
              - entity: sensor.wemosd1_uptime
                name: Betriebszeit
                icon: mdi:arrow-up-thick
          - type: custom:mini-graph-card
            name: Signalstärke
            icon: mdi:signal-variant
            line_color: orange
            font_size: 65
            entities:
              - sensor.wemosd1_rssi
          - type: entities
            show_header_toggle: false
            entities:
              - type: custom:fold-entity-row
                head:
                  type: section
                  label: Automatisierungen
                entities:
                  - entity: automation.update_available_tasmota_wemosd1_1
                    name: Updatebenachrichtigung
                  - entity: automation.upgrade_tasmota_wemosd1_1
                    name: Upgrade
              - type: custom:fold-entity-row
                head:
                  type: section
                  label: Scripts
                entities:
                  - entity: script.tasmota_status_wemosd1_1
                    name: Status
                  - entity: script.tasmota_fwstatus_wemosd1_1
                    name: FW-Status
                  - entity: script.tasmota_restart_wemosd1_1
                    name: Neustart
                  - entity: script.tasmota_reset_wemosd1_1
                    name: Reset
                  - entity: script.tasmota_upgrade_wemosd1_1
                    name: Upgrade

  - icon: mdi:server
    title: Server
    cards: 
      - type: vertical-stack
        cards:
          - type: custom:vertical-stack-in-card
            cards:
          # - type: vertical-stack
          #   cards:
              - type: entities
                title: Informationen
                show_header_toggle: false          
                entities:
                  - entity: sensor.last_boot
                    name: Server Uptime
                    format: relative
                  - entity: sensor.uptime
                    name: Home-Assistant Uptime
                  - entity: sensor.ssl_certificate_expiry
                    name: SSL-Zertifikatsgültigkeit
                    icon: mdi:certificate

              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    name: Frequenz
                    points_per_hour: 2
                    line_color: red
                    font_size: 65
                    entities:
                      - sensor.cpu_speed
                  - type: custom:mini-graph-card
                    name: Load
                    points_per_hour: 2
                    font_size: 65
    #                show:
    #                  fill: false
                    hours_to_show: 6
                    line_color:
                      - red
                      - blue
                      - green
                    entities:
                      - entity: sensor.load_1m
                        name: 1m
                      - entity: sensor.load_5m
                        name: 5m
                      - entity: sensor.load_15m
                        name: 15m
                  # - type: custom:mini-graph-card
                  #   name: CPU Temperatur
                  #   points_per_hour: 2
                  #   color_thresholds:
                  #     - value: 0
                  #       color: green
                  #     - value: 45
                  #       color: yellow
                  #     - value: 60
                  #       color: red
                  #   font_size: 65
                  #   entities:
                  #     - sensor.cpu_temperature
                  # - type: gauge
                  #   entity: sensor.cpu_temperature
                  #   min: 0
                  #   max: 100
                  #   severity:
                  #     green: 0
                  #     yellow: 45
                  #     red: 60
              - type: horizontal-stack
                cards:
                  - type: gauge
                    entity: sensor.cpu_temperature
                    min: 0
                    max: 100
                    severity:
                      green: 0
                      yellow: 45
                      red: 60
                  - type: gauge
                    entity: sensor.processor_use
                    min: 0
                    max: 100
                    severity:
                      green: 0
                      yellow: 45
                      red: 80
              # - type: horizontal-stack
              #   cards:
                  - type: gauge
                    entity: sensor.memory_use_percent
                    min: 0
                    max: 100
                    severity:
                      green: 0
                      yellow: 45
                      red: 80
                  - type: gauge
                    entity: sensor.swap_use_percent
                    min: 0
                    max: 100
                    severity:
                      green: 0
                      yellow: 50
                      red: 80
                  
              - type: horizontal-stack
                cards:
                  - type: gauge
                    entity: sensor.disk_use_percent
                    min: 0
                    max: 100
                    severity:
                      green: 0
                      yellow: 60
                      red: 80
                  - type: gauge
                    entity: sensor.disk_useperc_sda1
                    name: sda1
                    min: 0
                    max: 100
                    severity:
                      green: 0
                      yellow: 60
                      red: 80
                  - type: gauge
                    entity: sensor.disk_useperc_sda2
                    name: sda2
                    min: 0
                    max: 100
                    severity:
                      green: 0
                      yellow: 60
                      red: 80
          - type: glance
            title: Database
            entities:
              - entity: sensor.database_size_hass
                name: Home-Assistant
                format: relative
              - entity: sensor.database_size_nc
                name: Nextcloud
          
          
          
      - type: vertical-stack
        cards:
          # - type: glance
          #   title: Database
          #   entities:
          #     - entity: sensor.database_size_hass
          #       name: Home-Assistant
          #       format: relative
          #     - entity: sensor.database_size_nc
          #       name: Nextcloud
          
          - type: custom:vertical-stack-in-card
            cards:
              - type: entities
                show_header_toggle: false
                title: Netzwerk
                entities:
                  - entity: sensor.mypublicip
                    name: Public IP
                  - entity: sensor.speedtest_ping
                    name: Ping
                  - entity: sensor.asuswrt_download
                    name: Download
                    icon: mdi:download
                  - entity: sensor.asuswrt_upload
                    name: Upload
                    icon: mdi:upload
                  # - entity: sensor.network_in_eth0
                  #   name: eth0 - in
                  #   icon: mdi:download
                  # - entity: sensor.network_out_eth0
                  #   name: eth0 - out
                  #   icon: mdi:download
              - type: horizontal-stack
                title: Netzwerk
                cards:
                  - type: custom:mini-graph-card
                    name: Speedtest
 #                   line_color: "#4169E1"
                    font_size: 55
                    align_state: left
                    hours_to_show: 24
                    points_per_hour: 2
                    entities:
                      - entity: sensor.speedtest_download
                        show_state: true
                        color: "#ffd981"
                        # color_thresholds:
                        #   - value: 0
                        #     color: red
                        #   - value: 239
                        #     color: orange"
                        #   - value: 240
                        #     color: "#ffd981"
                      - entity: sensor.speedtest_upload
                        show_state: true
                        color: "#b381ff"
          - type: glance
            title: fail2ban
            entities:
              - entity: sensor.fail2ban_homeassistant
                name: Homeassistant
              - entity: sensor.fail2ban_nextcloud
                name: Nextcloud
              - entity: sensor.fail2ban_sshd
                name: SSH
                  #- type: custom:mini-graph-card
                  #  name: Upload
                   # line_color: orange
                    #font_size: 65
                  #  entities:
                  #    - sensor.speedtest_upload
                  # - type: custom:mini-graph-card
                  #   name: Ping
                  #   line_color: "#ff818e"
                  #   font_size: 55
                  #   hours_to_show: 72
                  #   points_per_hour: 2
                  #   entities:
                  #     - sensor.speedtest_ping
              # - type: glance
              #   #title: Network
              #   entities:
              #     - entity: sensor.asuswrt_download
              #       name: Download
              #       icon: mdi:download
              #     - entity: sensor.asuswrt_upload
              #       name: Upload
              #       icon: mdi:upload
              #     - entity: sensor.network_in_eth0
              #       name: eth0 - in
              #       icon: mdi:download
              #     - entity: sensor.network_out_eth0
              #       name: eth0 - out
              #       icon: mdi:download
          
          # - type: glance
          #   title: SSL
          #   entities:
          #     - entity: sensor.ssl_certificate_expiry
          #       name: SSL-Zertifikatsgültigkeit
          #       icon: mdi:certificate 
      - type: vertical-stack
        cards:
          - type: custom:vertical-stack-in-card
            cards:
              - type: glance
                title: Home Assistant
                columns: 7
                show_name: false
                entities:
                  - entity: sensor.count_automations
                    name: Automations
                    icon: mdi:play-circle
                  - entity: sensor.count_binary_sensors
                    name: Binary Sensors
                    icon: mdi:transition-masked
                  - entity: sensor.count_lights
                    name: Lights
                    icon: mdi:lightbulb
                  - entity: sensor.count_scripts
                    name: Scripts
                    icon: mdi:script-text
                  - entity: sensor.count_sensors
                    name: Sensors
                    icon: mdi:counter
                  - entity: sensor.count_switches
                    name: Switches
                    icon: mdi:toggle-switch
                  - entity: sensor.count_zones
                    name: Zones
              - type: entities
                show_header_toggle: false
                entities:
                  - entity: sensor.potential_breaking_changes
                    name: Breaking changes
                    icon: mdi:alert-circle
                  - type: custom:auto-entities
                    card:
                      type: custom:fold-entity-row
                      head:
                        type: section
                        label: Automatisierungen
                    filter:
                      include:
                        - domain: automation
                  - type: custom:auto-entities
                    card:
                      type: custom:fold-entity-row
                      head:
                        type: section
                        label: Scripts
                    filter:
                      include:
                        - domain: script
                  - entity: input_select.log_level
              
          
          - type: entities
            title: Links
            show_header_toggle: false
            entities:
              - type: weblink
                name: ASUS RT-AC68U
                url: !secret router_url
                icon: mdi:router-wireless
              - type: weblink
                name: pixelserv-tls
                url: !secret pixelserv_url
                icon: mdi:dns
              - type: weblink
                name: NUC-syncthing
                url: !secret nucst_url
                icon: mdi:sync
              - type: weblink
                name: Home Assistant
                url: https://www.home-assistant.io
                icon: mdi:home-assistant