- platform: google_travel_time
  name: google_travel_time_dev1_driving
  api_key: !secret google_api
  #origin: !secret google_orig
  origin: !secret device1
  destination: !secret zone1_fullname
  options:
    mode: driving

#- platform: google_travel_time
#  name: google_travel_time_dev1_bicycling
#  api_key: !secret google_api
#  #origin: !secret google_orig
#  origin: !secret device1
#  destination: !secret zone1_fullname
#  options:
#    mode: bicycling

- platform: google_travel_time
  name: google_travel_time_dev1_transit
  api_key: !secret google_api
  #origin: !secret google_orig
  origin: !secret device1
  destination: !secret zone1_fullname
  options:
    mode: transit

- platform: google_travel_time
  name: google_travel_time_dev1_dynamic_home
  api_key: !secret google_api
  origin: !secret device1
  destination: zone.home
  options:
    mode: transit

- platform: google_travel_time
  name: google_travel_time_dev2_driving
  api_key: !secret google_api
  #origin: !secret google_orig
  origin: !secret device2
  destination: !secret zone2_fullname
  options:
    mode: driving

#- platform: google_travel_time
#  name: google_travel_time_dev2_bicycling
#  api_key: !secret google_api
#  #origin: !secret google_orig
#  origin: !secret device2
#  destination: !secret zone2_fullname
#  options:
#    mode: bicycling

- platform: google_travel_time
  name: google_travel_time_dev2_transit
  api_key: !secret google_api
  #origin: !secret google_orig
  origin: !secret device2
  destination: !secret zone2_fullname
  options:
    mode: transit

- platform: google_travel_time
  name: google_travel_time_dev2_dynamic_home
  api_key: !secret google_api
  origin: !secret device2
  destination: zone.home
  options:
    mode: driving

#- platform: google_geocode
#  name: geocode_dev1
#  origin: !secret device1
#  api_key: !secret google_api

#- platform: google_geocode
#  name: geocode_dev2
#  origin: !secret device2
#  api_key: !secret google_api

- platform: uber
  server_token: !secret uber_st
  end_latitude: !secret uber_endlat
  end_longitude: !secret uber_endlong
  product_ids:
    - '0af354f1-e12e-4253-abae-3df48506c658'

- platform: time_date
  display_options:
    - 'time'
    - 'date'

#- platform: imap
#  name: mail
#  server: !secret mail_server
#  port: 993
#  username: !secret mail_uname
#  password: !secret mail_pw

- platform: mqtt
  name: sonoff_3028_version
  state_topic: "stat/sonoff/STATUS2"
  value_template: "{{ value_json['StatusFWR'].Version }}"

- platform: mqtt
  name: sonoff_office_temperature
  state_topic: "tele/sonoff/SENSOR"
  value_template: "{{ value_json['AM2301'].Temperature }}"
  unit_of_measurement: "°C"

- platform: mqtt
  name: sonoff_office_humidty
  state_topic: "tele/sonoff/SENSOR"
  value_template: "{{ value_json['AM2301'].Humidity }}"
  unit_of_measurement: "%"

- platform: mqtt
  name: wemosd1_room_temperature
  state_topic: "tele/wemosd1_1/SENSOR"
  value_template: "{{ value_json['SHT3X-0x45'].Temperature }}"
  unit_of_measurement: "°C"

- platform: mqtt
  name: wemosd1_room_humidty
  state_topic: "tele/wemosd1_1/SENSOR"
  value_template: "{{ value_json['SHT3X-0x45'].Humidity }}"
  unit_of_measurement: "%"

- platform: mqtt
  name: sonoff_uptime
  state_topic: "tele/sonoff/STATE"
  value_template: "{{ value_json.Uptime }}"
  unit_of_measurement: "h"

- platform: mqtt
  name: sonoff_rssi
  state_topic: "tele/sonoff/STATE"
  value_template: "{{ value_json['Wifi'].RSSI }}"
  unit_of_measurement: "dBm"

- platform: mqtt
  name: sonoff_vcc
  state_topic: "tele/sonoff/STATE"
  value_template: "{{ value_json.Vcc }}"
  unit_of_measurement: "V"

- platform: mqtt
  name: sonoff_maddox_version
  state_topic: "sonoff-version"
  #value_template: "{{ value_json['Wifi'].RSSI }}"
  #unit_of_measurement: "dBm"

- platform: cert_expiry
  name: ssl_certificate_expiry
  host: !secret ssl_domain

- platform: systemmonitor
  resources:
    - type: disk_free
      arg: /
    - type: disk_use_percent
      arg: /
    - type: memory_free
    - type: memory_use_percent
    - type: processor_use
    - type: network_in
      arg: eth0
    - type: network_out
      arg: eth0
    - type: swap_use_percent

#- platform: geizhals
#  name: geizh_huee27
#  product_id: 1455121
#  description: "Hue E27"
#  domain: 'geizhals.at'
#  regex: '\D\s(\d*)[\,|\.](\d*)'
#- platform: geizhals
#  name: geizh_gu10
#  product_id: 1517040
#  description: "Hue GU10"
#  domain: 'geizhals.at'
#  regex: '\D\s(\d*)[\,|\.](\d*)'

- platform: command_line
  name: CPU Temperature
  command: cat /sys/class/thermal/thermal_zone1/temp
  unit_of_measurement: '°C'
  value_template: '{{ (value|int / 1000)|round(1) }}'

- platform: speedtest
  name: speedtest
  monitored_conditions:
    - ping
    - download
    - upload

- platform: uptime
  name: Uptime
  unit_of_measurement: hours

- platform: version
  name: hass_version
#- platform: bitcoin
#  currency: USD
#  display_options:
#    - exchangerate
#    - trade_volume_btc

- platform: sql
  db_url: !secret mysql_db
  queries:
    - name: database size hass
      query: 'SELECT table_schema "database", Round(Sum(data_length + index_length) / 1024 / 1024, 1) "value" FROM information_schema.tables WHERE table_schema="hassdb" GROUP BY table_schema;'
      column: 'value'
      unit_of_measurement: MB
    - name: database size nc
      query: 'SELECT table_schema "database", Round(Sum(data_length + index_length) / 1024 / 1024, 1) "value" FROM information_schema.tables WHERE table_schema="nextcloud" GROUP BY table_schema;'
      column: 'value'
      unit_of_measurement: MB

- platform: fail2ban
  file_path: /fail2ban/fail2ban.log
  scan_interval: 180
  jails:
    - homeassistant
    - nextcloud
    - sshd

#- platform: scrape
#  resource: !secret pixelserv_url
#  name: pixelserv_requests_total
#  select: 'tr:nth-of-type(8) > td:nth-of-type(2)'
#  unit_of_measurement: 'Requests'
#- platform: rest
#  name: SC Tiles latest version
#  resource: https://raw.githubusercontent.com/c727/home-assistant-tiles/master/LATEST_VERSION
#- platform: waqi
#  name: waqi
#  token: !secret waqi_token
#  locations:
#    - !secret waqi_location
